flat_mod!(then, swap);